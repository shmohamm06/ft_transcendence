
> game-service@1.0.0 dev
> nodemon src/app.ts

[33m[nodemon] 3.1.10[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching path(s): *.*[39m
[33m[nodemon] watching extensions: ts,json[39m
[32m[nodemon] starting `ts-node src/app.ts`[39m
GameGateway initialized
Game service WebSocket server starting on port 8080 with path /ws/game
Game service is running on port 8080
New WebSocket connection received
Request URL: /ws/game?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTIsInVzZXJuYW1lIjoidHpoYWt5cG8iLCJlbWFpbCI6InR6aGFreXBvQHN0dWRlbnQuNDJhYnVkaGFiaS5hZSIsImF2YXRhciI6Imh0dHBzOi8vY2RuLmludHJhLjQyLmZyL3VzZXJzLzU3YWI5NTRmYzE0YjkzNmExMmYzMjdkMjUyYTQ1YTU2L21lZGl1bV90emhha3lwby5qcGciLCJpbnRyYV9pZCI6MTMzNDQzLCJpbnRyYV9sb2dpbiI6InR6aGFreXBvIiwiYXV0aF9wcm92aWRlciI6IjQyIiwiaWF0IjoxNzUyMDczMzc1fQ.Z8rSqI5Q3HyX9a5mpgOsjFxSDHRSGX68RYnZqEUYjjM
Request headers: {
  host: 'localhost:8080',
  connection: 'Upgrade',
  pragma: 'no-cache',
  'cache-control': 'no-cache',
  'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  upgrade: 'websocket',
  origin: 'http://localhost:3000',
  'sec-websocket-version': '13',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en',
  'sec-websocket-key': 'TTmS0qS1pcp5R1a+Gu6zBw==',
  'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
}
Client /ws/game?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTIsInVzZXJuYW1lIjoidHpoYWt5cG8iLCJlbWFpbCI6InR6aGFreXBvQHN0dWRlbnQuNDJhYnVkaGFiaS5hZSIsImF2YXRhciI6Imh0dHBzOi8vY2RuLmludHJhLjQyLmZyL3VzZXJzLzU3YWI5NTRmYzE0YjkzNmExMmYzMjdkMjUyYTQ1YTU2L21lZGl1bV90emhha3lwby5qcGciLCJpbnRyYV9pZCI6MTMzNDQzLCJpbnRyYV9sb2dpbiI6InR6aGFreXBvIiwiYXV0aF9wcm92aWRlciI6IjQyIiwiaWF0IjoxNzUyMDczMzc1fQ.Z8rSqI5Q3HyX9a5mpgOsjFxSDHRSGX68RYnZqEUYjjM connected to game service
Game mode: ai
Attempting to load user settings with token: eyJhbGciOiJIUzI1NiIs...
Client /ws/game?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTIsInVzZXJuYW1lIjoidHpoYWt5cG8iLCJlbWFpbCI6InR6aGFreXBvQHN0dWRlbnQuNDJhYnVkaGFiaS5hZSIsImF2YXRhciI6Imh0dHBzOi8vY2RuLmludHJhLjQyLmZyL3VzZXJzLzU3YWI5NTRmYzE0YjkzNmExMmYzMjdkMjUyYTQ1YTU2L21lZGl1bV90emhha3lwby5qcGciLCJpbnRyYV9pZCI6MTMzNDQzLCJpbnRyYV9sb2dpbiI6InR6aGFreXBvIiwiYXV0aF9wcm92aWRlciI6IjQyIiwiaWF0IjoxNzUyMDczMzc1fQ.Z8rSqI5Q3HyX9a5mpgOsjFxSDHRSGX68RYnZqEUYjjM disconnected from game service
New WebSocket connection received
Request URL: /ws/game?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTIsInVzZXJuYW1lIjoidHpoYWt5cG8iLCJlbWFpbCI6InR6aGFreXBvQHN0dWRlbnQuNDJhYnVkaGFiaS5hZSIsImF2YXRhciI6Imh0dHBzOi8vY2RuLmludHJhLjQyLmZyL3VzZXJzLzU3YWI5NTRmYzE0YjkzNmExMmYzMjdkMjUyYTQ1YTU2L21lZGl1bV90emhha3lwby5qcGciLCJpbnRyYV9pZCI6MTMzNDQzLCJpbnRyYV9sb2dpbiI6InR6aGFreXBvIiwiYXV0aF9wcm92aWRlciI6IjQyIiwiaWF0IjoxNzUyMDczMzc1fQ.Z8rSqI5Q3HyX9a5mpgOsjFxSDHRSGX68RYnZqEUYjjM
Request headers: {
  host: 'localhost:8080',
  connection: 'Upgrade',
  pragma: 'no-cache',
  'cache-control': 'no-cache',
  'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  upgrade: 'websocket',
  origin: 'http://localhost:3000',
  'sec-websocket-version': '13',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en',
  'sec-websocket-key': 'HfmV0VFORXNbKI4AOJ6smA==',
  'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
}
Client /ws/game?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTIsInVzZXJuYW1lIjoidHpoYWt5cG8iLCJlbWFpbCI6InR6aGFreXBvQHN0dWRlbnQuNDJhYnVkaGFiaS5hZSIsImF2YXRhciI6Imh0dHBzOi8vY2RuLmludHJhLjQyLmZyL3VzZXJzLzU3YWI5NTRmYzE0YjkzNmExMmYzMjdkMjUyYTQ1YTU2L21lZGl1bV90emhha3lwby5qcGciLCJpbnRyYV9pZCI6MTMzNDQzLCJpbnRyYV9sb2dpbiI6InR6aGFreXBvIiwiYXV0aF9wcm92aWRlciI6IjQyIiwiaWF0IjoxNzUyMDczMzc1fQ.Z8rSqI5Q3HyX9a5mpgOsjFxSDHRSGX68RYnZqEUYjjM connected to game service
Game mode: ai
Attempting to load user settings with token: eyJhbGciOiJIUzI1NiIs...
Global ball speed multiplier set to: 0.8333333333333334
Global ball speed multiplier set to: 0.8333333333333334
Game in countdown, ball speed will be applied when game starts: 6
Ball speed set to 5 (multiplier: 0.8333333333333334)
Updated ball speed to: 5 (multiplier: 0.8333333333333334) for all active games
Global paddle speed multiplier set to: 0.75
Global paddle speed multiplier set to: 0.75
Paddle speed set to 6 (multiplier: 0.75)
Updated paddle speed to: 6 (multiplier: 0.75) for all active games
Ball speed changed from 6 to 5, updating velocity...
Game in countdown, ball speed will be applied when game starts: 5
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
Ball velocity updated: x=4.47, y=2.24, speed=5
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
Failed to load user settings: TypeError: fetch failed
    at node:internal/deps/undici/undici:13510:13
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async GameGateway.loadUserSettings (/Users/mac/Desktop/check/ft_transcendence/backend/game-service/src/modules/game/game.gateway.ts:118:30) {
  [cause]: Error: getaddrinfo ENOTFOUND auth-service
      at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26) {
    errno: -3008,
    code: 'ENOTFOUND',
    syscall: 'getaddrinfo',
    hostname: 'auth-service'
  }
}
Could not load user settings: fetch failed
Failed to load user settings: TypeError: fetch failed
    at node:internal/deps/undici/undici:13510:13
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async GameGateway.loadUserSettings (/Users/mac/Desktop/check/ft_transcendence/backend/game-service/src/modules/game/game.gateway.ts:118:30) {
  [cause]: Error: getaddrinfo ENOTFOUND auth-service
      at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26) {
    errno: -3008,
    code: 'ENOTFOUND',
    syscall: 'getaddrinfo',
    hostname: 'auth-service'
  }
}
Could not load user settings: fetch failed
AI mode move: player1 down
AI mode move: player1 up
AI mode move: player1 down
AI mode move: player1 up
Ball velocity updated: x=4.89, y=1.02, speed=5
AI mode move: player1 up
AI mode move: player1 down
AI mode move: player1 up
AI mode move: player1 down
AI mode move: player1 up
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 up
AI mode move: player1 down
AI mode move: player1 up
AI mode move: player1 down
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
Ball velocity updated: x=5.00, y=-0.19, speed=5
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 down
AI mode move: player1 up
AI mode move: player1 down
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
AI mode move: player1 up
Client /ws/game?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTIsInVzZXJuYW1lIjoidHpoYWt5cG8iLCJlbWFpbCI6InR6aGFreXBvQHN0dWRlbnQuNDJhYnVkaGFiaS5hZSIsImF2YXRhciI6Imh0dHBzOi8vY2RuLmludHJhLjQyLmZyL3VzZXJzLzU3YWI5NTRmYzE0YjkzNmExMmYzMjdkMjUyYTQ1YTU2L21lZGl1bV90emhha3lwby5qcGciLCJpbnRyYV9pZCI6MTMzNDQzLCJpbnRyYV9sb2dpbiI6InR6aGFreXBvIiwiYXV0aF9wcm92aWRlciI6IjQyIiwiaWF0IjoxNzUyMDczMzc1fQ.Z8rSqI5Q3HyX9a5mpgOsjFxSDHRSGX68RYnZqEUYjjM disconnected from game service
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node src/app.ts`[39m
GameGateway initialized
Game service WebSocket server starting on port 8080 with path /ws/game
Game service is running on port 8080
